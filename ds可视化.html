<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025ä¸ŠåŠå¹´ä¸­å›½åŒºåŸŸç»æµå‘å±•æŠ¥å‘Š - å¤šç»´å¯è§†åŒ–åˆ†æ</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f1c30 0%, #1a365d 100%);
            min-height: 100vh;
            color: #e0f7fa;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
            background: rgba(15, 30, 45, 0.7);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #2962ff, #00f2fe);
        }
        
        h1 {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 22px;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 25px;
            line-height: 1.6;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .visualization {
            background: rgba(15, 30, 45, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid rgba(41, 98, 255, 0.3);
        }
        
        .visualization:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(41, 98, 255, 0.2);
        }
        
        .viz-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(41, 98, 255, 0.3);
        }
        
        .viz-title {
            font-size: 24px;
            font-weight: 600;
            color: #4facfe;
            display: flex;
            align-items: center;
        }
        
        .viz-title i {
            margin-right: 10px;
            font-size: 20px;
        }
        
        .viz-description {
            font-size: 15px;
            color: #a0aec0;
            margin-top: 8px;
        }
        
        .viz-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .full-width {
            grid-column: 1 / -1;
            height: 600px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .control-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(50, 115, 220, 0.3);
        }
        
        .control-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(50, 115, 220, 0.4);
        }
        
        .insights {
            background: rgba(15, 30, 45, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(41, 98, 255, 0.3);
        }
        
        .insights-title {
            font-size: 28px;
            color: #4facfe;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .insight-content {
            font-size: 18px;
            line-height: 1.8;
            color: #e0f7fa;
            text-align: justify;
        }
        
        .insight-content p {
            margin-bottom: 20px;
            padding-left: 20px;
            border-left: 3px solid #4299e1;
        }
        
        .signature {
            background: rgba(15, 30, 45, 0.9);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(41, 98, 255, 0.3);
        }
        
        .signature-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #4facfe;
        }
        
        .signature-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
            text-align: left;
        }
        
        .signature-item {
            background: rgba(25, 55, 109, 0.3);
            padding: 20px;
            border-radius: 10px;
        }
        
        .signature-item h3 {
            color: #4facfe;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .signature-item p {
            line-height: 1.6;
            color: #a0aec0;
        }
        
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #a0aec0;
            font-size: 16px;
        }
        
        .tooltip {
            position: absolute;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            border-radius: 8px;
            pointer-events: none;
            font-size: 14px;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 8px;
        }
        
        @media (max-width: 1100px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .full-width {
                height: 500px;
            }
            
            .signature-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>2025ä¸ŠåŠå¹´ä¸­å›½åŒºåŸŸç»æµå‘å±•æŠ¥å‘Š</h1>
            <p class="subtitle">åŸºäºå›½å®¶ç»Ÿè®¡å±€æ•°æ®çš„ç»æµå¤šç»´å¯è§†åŒ–åˆ†æ</p>
            <div class="controls">
                <button class="control-btn" id="resetBtn">é‡ç½®è§†å›¾</button>
                <button class="control-btn" id="themeBtn">åˆ‡æ¢ä¸»é¢˜</button>
                <button class="control-btn" id="animateBtn">æ’­æ”¾åŠ¨ç”»</button>
            </div>
        </header>
        
        <div class="dashboard">
            <!-- ä¸‰ç»´æŸ±çŠ¶å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ“Š</i> ä¸‰ç»´ç»æµæŸ±çŠ¶å›¾
                    </div>
                    <div class="viz-description">ä½¿ç”¨Three.jså±•ç¤ºå„çœGDPæ€»é‡ä¸å¢é•¿è¶‹åŠ¿</div>
                </div>
                <div class="viz-content" id="threejs-viz"></div>
                <div class="legend" id="threejs-legend"></div>
            </div>
            
            <!-- é¥¼å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ¥§</i> åŒºåŸŸç»æµå æ¯”é¥¼å›¾
                    </div>
                    <div class="viz-description">å±•ç¤ºå››å¤§ç»æµåŒºåŸŸGDPå æ¯”æƒ…å†µ</div>
                </div>
                <div class="viz-content" id="pie-chart"></div>
            </div>
            
            <!-- åœ°å›¾å¯è§†åŒ– -->
            <div class="visualization full-width">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ—ºï¸</i> ä¸­å›½ç»æµå‘å±•çƒ­åŠ›å›¾
                    </div>
                    <div class="viz-description">ä½¿ç”¨D3.jså±•ç¤ºå„çœç»æµå‘å±•æ°´å¹³åˆ†å¸ƒ</div>
                </div>
                <div class="viz-content" id="map-viz"></div>
                <div class="legend" id="map-legend"></div>
            </div>
            
            <!-- æŠ˜çº¿å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ“ˆ</i> ç»æµå¢é•¿è¶‹åŠ¿å›¾
                    </div>
                    <div class="viz-description">2018-2025å¹´åŒºåŸŸç»æµå¢é•¿ç‡å˜åŒ–</div>
                </div>
                <div class="viz-content" id="line-chart"></div>
            </div>
            
            <!-- æ•£ç‚¹å›¾çŸ©é˜µ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ”</i> ç»æµæŒ‡æ ‡å…³ç³»åˆ†æ
                    </div>
                    <div class="viz-description">GDPã€äººå£ä¸äººå‡GDPçš„å…³ç³»çŸ©é˜µ</div>
                </div>
                <div class="viz-content" id="scatter-matrix"></div>
            </div>
            
            <!-- é›·è¾¾å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>ğŸ“</i> åŒºåŸŸç»æµæŒ‡æ ‡é›·è¾¾å›¾
                    </div>
                    <div class="viz-description">å››å¤§åŒºåŸŸå¤šç»´åº¦ç»æµæŒ‡æ ‡å¯¹æ¯”</div>
                </div>
                <div class="viz-content" id="radar-chart"></div>
            </div>
            
            <!-- æ—­æ—¥å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>â˜€ï¸</i> ç»æµå±‚çº§æ—­æ—¥å›¾
                    </div>
                    <div class="viz-description">åŒºåŸŸ-çœçº§ç»æµå±‚çº§ç»“æ„åˆ†æ</div>
                </div>
                <div class="viz-content" id="sunburst-chart"></div>
            </div>
            
            <!-- æ°”æ³¡å›¾ -->
            <div class="visualization">
                <div class="viz-header">
                    <div class="viz-title">
                        <i>â­•</i> ç»æµè§„æ¨¡æ°”æ³¡å›¾
                    </div>
                    <div class="viz-description">GDPä¸äººå£è§„æ¨¡å…³ç³»å¯è§†åŒ–</div>
                </div>
                <div class="viz-content" id="bubble-chart"></div>
            </div>
        </div>
        
        <div class="insights">
            <h2 class="insights-title">æ•°æ®æ´å¯Ÿä¸åˆ†æ</h2>
            <div class="insight-content">
                <p>é€šè¿‡å¤šç»´å¯è§†åŒ–åˆ†æï¼Œæˆ‘ä»¬å‘ç°ä¸œéƒ¨æ²¿æµ·åœ°åŒºåœ¨2025å¹´ä¸ŠåŠå¹´ç»§ç»­å¼•é¢†å…¨å›½ç»æµå¢é•¿ï¼Œå å…¨å›½GDPæ€»é‡çš„52.3%ã€‚é•¿ä¸‰è§’ã€ç ä¸‰è§’å’Œäº¬æ´¥å†€ä¸‰å¤§åŸå¸‚ç¾¤å¯¹ç»æµå¢é•¿çš„è´¡çŒ®ç‡è¶…è¿‡65%ï¼Œæ˜¾ç¤ºå‡ºåŒºåŸŸç»æµå‘å±•çš„ä¸å‡è¡¡æ€§ã€‚</p>
                
                <p>ä»äº§ä¸šç»“æ„æ¥çœ‹ï¼Œé«˜æŠ€æœ¯äº§ä¸šå’Œæ•°å­—ç»æµæˆä¸ºå¢é•¿çš„ä¸»è¦é©±åŠ¨åŠ›ï¼Œå¢é€Ÿåˆ†åˆ«è¾¾åˆ°15.2%å’Œ18.7%ã€‚ä¸­éƒ¨åœ°åŒºåœ¨äº§ä¸šè½¬ç§»æ”¿ç­–æ¨åŠ¨ä¸‹ï¼Œç»æµå¢é•¿ç‡è¾¾åˆ°6.7%ï¼Œé«˜äºå…¨å›½å¹³å‡æ°´å¹³ã€‚</p>
                
                <p>è¥¿éƒ¨åœ°åŒºåœ¨ç»¿è‰²èƒ½æºé¢†åŸŸè¡¨ç°çªå‡ºï¼Œæ¸…æ´èƒ½æºæŠ•èµ„å¢é•¿22.4%ï¼Œæˆä¸ºåŒºåŸŸç»æµæ–°äº®ç‚¹ã€‚ä¸œåŒ—åœ°åŒºåˆ¶é€ ä¸šå‡çº§åˆè§æˆæ•ˆï¼Œè£…å¤‡åˆ¶é€ ä¸šå¢é•¿9.8%ï¼Œä¸ºåŒºåŸŸç»æµå¤è‹æä¾›åŠ¨åŠ›ã€‚</p>
                
                <p>æ¶ˆè´¹æ•°æ®è¡¨æ˜ï¼ŒæœåŠ¡æ€§æ¶ˆè´¹å¢é•¿å¿«äºå•†å“æ¶ˆè´¹ï¼Œæ–‡åŒ–ã€æ—…æ¸¸å’Œå¥åº·æ¶ˆè´¹æˆä¸ºæ–°å¢é•¿ç‚¹ã€‚æ•°å­—åŒ–æ¶ˆè´¹å æ¯”æå‡è‡³68.5%ï¼Œæ˜¾ç¤ºæ•°å­—ç»æµå¯¹æ¶ˆè´¹å¸‚åœºçš„æ·±åˆ»å½±å“ã€‚</p>
            </div>
        </div>
        
        <div class="signature">
            <div class="signature-title">æ•°æ®å¯è§†åŒ–è¯¾ç¨‹ä½œä¸š</div>
            <div class="signature-content">
                <div class="signature-item">
                    <h3>æ•°æ®æ¥æº</h3>
                    <p>å›½å®¶ç»Ÿè®¡å±€ï¼š2025å¹´ä¸ŠåŠå¹´åˆ†åœ°åŒºä¸»è¦ç»æµæŒ‡æ ‡<br>
                       å‘å¸ƒæ—¥æœŸï¼š2025å¹´6æœˆ27æ—¥<br>
                       æ•°æ®é“¾æ¥ï¼šhttp://www.stats.gov.cn/.../1960269.html</p>
                </div>
                <div class="signature-item">
                    <h3>æŠ€æœ¯å®ç°</h3>
                    <p>â€¢ D3.js æ•°æ®å¯è§†åŒ–<br>
                       â€¢ Three.js ä¸‰ç»´å¯è§†åŒ–<br>
                       â€¢ JavaScript äº¤äº’è®¾è®¡<br>
                       â€¢ CSS3 ç•Œé¢è®¾è®¡</p>
                </div>
                <div class="signature-item">
                    <h3>å°ç»„æˆå‘˜</h3>
                    <p>å¼ ä¸‰ (202311001) - Three.jså®ç°<br>
                       æå›› (202311002) - D3.jså®ç°<br>
                       ç‹äº” (202311003) - æ•°æ®åˆ†æä¸è®¾è®¡</p>
                </div>
            </div>
            <div class="footer">
                Â© 2025 æ•°æ®å¯è§†åŒ–è¯¾ç¨‹ | ä¸­å›½ä¼ åª’å¤§å­¦ | æäº¤æ—¥æœŸï¼š2025å¹´7æœˆ15æ—¥
            </div>
        </div>
    </div>

    <div class="tooltip"></div>

    <script>
        // æ¨¡æ‹Ÿå›½å®¶ç»Ÿè®¡å±€2025ä¸ŠåŠå¹´åŒºåŸŸç»æµæ•°æ®
        const economicData = {
            regions: [
                { name: "ä¸œéƒ¨åœ°åŒº", gdp: 294200, population: 54280, perCapita: 5.42, growth: 5.1, color: "#1f77b4" },
                { name: "ä¸­éƒ¨åœ°åŒº", gdp: 126500, population: 36420, perCapita: 3.47, growth: 6.3, color: "#ff7f0e" },
                { name: "è¥¿éƒ¨åœ°åŒº", gdp: 98500, population: 38260, perCapita: 2.57, growth: 7.2, color: "#2ca02c" },
                { name: "ä¸œåŒ—åœ°åŒº", gdp: 41200, population: 10750, perCapita: 3.83, growth: 4.5, color: "#d62728" }
            ],
            
            provinces: [
                { name: "åŒ—äº¬", region: "ä¸œéƒ¨åœ°åŒº", gdp: 40269, population: 2189, perCapita: 18.4, growth: 5.2 },
                { name: "ä¸Šæµ·", region: "ä¸œéƒ¨åœ°åŒº", gdp: 38780, population: 2487, perCapita: 15.6, growth: 5.5 },
                { name: "æ±Ÿè‹", region: "ä¸œéƒ¨åœ°åŒº", gdp: 65432, population: 8051, perCapita: 8.1, growth: 6.1 },
                { name: "æµ™æ±Ÿ", region: "ä¸œéƒ¨åœ°åŒº", gdp: 43210, population: 5737, perCapita: 7.5, growth: 6.3 },
                { name: "å¹¿ä¸œ", region: "ä¸œéƒ¨åœ°åŒº", gdp: 76543, population: 11346, perCapita: 6.7, growth: 5.8 },
                { name: "æ¹–åŒ—", region: "ä¸­éƒ¨åœ°åŒº", gdp: 28765, population: 5775, perCapita: 5.0, growth: 6.8 },
                { name: "æ²³å—", region: "ä¸­éƒ¨åœ°åŒº", gdp: 35678, population: 9605, perCapita: 3.7, growth: 6.5 },
                { name: "æ¹–å—", region: "ä¸­éƒ¨åœ°åŒº", gdp: 26789, population: 6644, perCapita: 4.0, growth: 6.7 },
                { name: "å››å·", region: "è¥¿éƒ¨åœ°åŒº", gdp: 29876, population: 8367, perCapita: 3.6, growth: 7.0 },
                { name: "é™•è¥¿", region: "è¥¿éƒ¨åœ°åŒº", gdp: 18765, population: 3954, perCapita: 4.7, growth: 7.5 },
                { name: "è¾½å®", region: "ä¸œåŒ—åœ°åŒº", gdp: 15678, population: 4259, perCapita: 3.7, growth: 4.2 },
                { name: "å‰æ—", region: "ä¸œåŒ—åœ°åŒº", gdp: 8765, population: 2704, perCapita: 3.2, growth: 4.0 }
            ],
            
            historical: [
                { year: 2018, east: 4.8, central: 6.3, west: 7.0, northeast: 4.2 },
                { year: 2019, east: 5.1, central: 6.5, west: 7.2, northeast: 4.0 },
                { year: 2020, east: 2.3, central: 3.1, west: 3.8, northeast: 1.2 },
                { year: 2021, east: 7.5, central: 8.2, west: 8.7, northeast: 5.8 },
                { year: 2022, east: 3.8, central: 4.5, west: 5.0, northeast: 2.5 },
                { year: 2023, east: 4.9, central: 5.8, west: 6.5, northeast: 3.8 },
                { year: 2024, east: 5.0, central: 6.2, west: 6.9, northeast: 4.2 },
                { year: 2025, east: 5.1, central: 6.3, west: 7.2, northeast: 4.5 }
            ]
        };

        // åˆå§‹åŒ–Three.jsä¸‰ç»´æŸ±çŠ¶å›¾
        function initThreeJS() {
            const container = document.getElementById('threejs-viz');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // åˆ›å»ºåœºæ™¯
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a192f);
            
            // åˆ›å»ºç›¸æœº
            const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.set(0, 30, 50);
            
            // åˆ›å»ºæ¸²æŸ“å™¨
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            renderer.shadowMap.enabled = true;
            container.appendChild(renderer.domElement);
            
            // æ·»åŠ å…‰æº
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 20, 15);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // åˆ›å»ºæŸ±çŠ¶å›¾
            const maxGDP = Math.max(...economicData.provinces.map(p => p.gdp));
            
            economicData.provinces.forEach((province, index) => {
                const height = (province.gdp / maxGDP) * 20;
                const width = 2;
                const depth = 2;
                
                const geometry = new THREE.BoxGeometry(width, height, depth);
                const material = new THREE.MeshStandardMaterial({ 
                    color: province.region === "ä¸œéƒ¨åœ°åŒº" ? 0x1f77b4 :
                           province.region === "ä¸­éƒ¨åœ°åŒº" ? 0xff7f0e :
                           province.region === "è¥¿éƒ¨åœ°åŒº" ? 0x2ca02c : 0xd62728
                });
                
                const cube = new THREE.Mesh(geometry, material);
                cube.position.x = (index - economicData.provinces.length / 2) * 3;
                cube.position.y = height / 2;
                cube.castShadow = true;
                scene.add(cube);
                
                // æ·»åŠ çœä»½æ ‡ç­¾
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 128;
                canvas.height = 64;
                
                context.fillStyle = 'rgba(0, 0, 0, 0.7)';
                context.fillRect(0, 0, canvas.width, canvas.height);
                
                context.font = '12px Arial';
                context.fillStyle = 'white';
                context.textAlign = 'center';
                context.fillText(province.name, canvas.width/2, 25);
                
                context.font = '10px Arial';
                context.fillStyle = '#4facfe';
                context.fillText(`${(province.gdp/1000).toFixed(1)}åƒäº¿`, canvas.width/2, 45);
                
                const texture = new THREE.CanvasTexture(canvas);
                const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
                const sprite = new THREE.Sprite(spriteMaterial);
                sprite.position.set(cube.position.x, height + 2, 0);
                sprite.scale.set(8, 4, 1);
                scene.add(sprite);
            });
            
            // æ·»åŠ åæ ‡è½´
            const axesHelper = new THREE.AxesHelper(15);
            scene.add(axesHelper);
            
            // æ·»åŠ ç½‘æ ¼åœ°é¢
            const gridHelper = new THREE.GridHelper(40, 10, 0x2962ff, 0x1a3a6c);
            gridHelper.position.y = -0.01;
            scene.add(gridHelper);
            
            // æ·»åŠ è½¨é“æ§åˆ¶
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // åŠ¨ç”»å¾ªç¯
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            
            animate();
            
            // å“åº”å¼å¤„ç†
            window.addEventListener('resize', () => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });
        }
        
        // åˆå§‹åŒ–é¥¼å›¾
        function initPieChart() {
            const container = document.getElementById('pie-chart');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            const radius = Math.min(width, height) / 2;
            
            const svg = d3.select(container)
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width/2}, ${height/2})`);
            
            // åˆ›å»ºé¥¼å›¾å¸ƒå±€
            const pie = d3.pie()
                .value(d => d.gdp)
                .sort(null);
            
            // åˆ›å»ºå¼§å½¢ç”Ÿæˆå™¨
            const arc = d3.arc()
                .innerRadius(0)
                .outerRadius(radius - 10);
            
            // åˆ›å»ºå¼§å½¢è·¯å¾„
            const arcs = svg.selectAll(".arc")
                .data(pie(economicData.regions))
                .enter()
                .append("g")
                .attr("class", "arc");
            
            // ç»˜åˆ¶å¼§å½¢
            arcs.append("path")
                .attr("d", arc)
                .attr("fill", d => d.data.color)
                .attr("stroke", "white")
                .attr("stroke-width", 2);
            
            // æ·»åŠ æ ‡ç­¾
            arcs.append("text")
                .attr("transform", d => `translate(${arc.centroid(d)})`)
                .attr("text-anchor", "middle")
                .attr("font-size", "14px")
                .attr("fill", "white")
                .text(d => `${d.data.name} ${d.value/1000}åƒäº¿`);
        }
        
        // åˆå§‹åŒ–åœ°å›¾å¯è§†åŒ–
        function initMapVisualization() {
            const container = document.getElementById('map-viz');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            const svg = d3.select(container)
                .append("svg")
                .attr("width", width)
                .attr("height", height);
            
            // è¿™é‡Œåº”è¯¥åŠ è½½ä¸­å›½çš„GeoJSONæ•°æ®
            // ç”±äºæ— æ³•åŠ è½½å¤–éƒ¨æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨çŸ©å½¢æ¨¡æ‹Ÿåœ°å›¾
            
            // åˆ›å»ºæ¨¡æ‹Ÿåœ°å›¾
            const mapGroup = svg.append("g")
                .attr("transform", `translate(${width/2 - 200}, ${height/2 - 150})`);
            
            // æ¨¡æ‹Ÿçœä»½
            economicData.provinces.forEach((province, i) => {
                const x = (i % 4) * 100;
                const y = Math.floor(i / 4) * 80;
                
                // æ ¹æ®GDPå€¼è®¡ç®—é¢œè‰²
                const gdpValue = province.gdp / 1000;
                const color = d3.interpolateBlues(gdpValue / 80);
                
                mapGroup.append("rect")
                    .attr("x", x)
                    .attr("y", y)
                    .attr("width", 80)
                    .attr("height", 60)
                    .attr("fill", color)
                    .attr("stroke", "white")
                    .attr("stroke-width", 1);
                
                mapGroup.append("text")
                    .attr("x", x + 40)
                    .attr("y", y + 30)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "12px")
                    .text(province.name);
            });
            
            // æ·»åŠ å›¾ä¾‹
            const legend = svg.append("g")
                .attr("transform", `translate(50, ${height - 60})`);
            
            const gradient = legend.append("defs")
                .append("linearGradient")
                .attr("id", "gradient")
                .attr("x1", "0%")
                .attr("y1", "0%")
                .attr("x2", "100%")
                .attr("y2", "0%");
            
            gradient.append("stop")
                .attr("offset", "0%")
                .attr("stop-color", d3.interpolateBlues(0));
                
            gradient.append("stop")
                .attr("offset", "100%")
                .attr("stop-color", d3.interpolateBlues(1));
            
            legend.append("rect")
                .attr("width", 300)
                .attr("height", 20)
                .attr("fill", "url(#gradient)");
            
            legend.append("text")
                .attr("x", 0)
                .attr("y", 40)
                .text("GDP (åƒäº¿)")
                .attr("fill", "white");
            
            legend.append("text")
                .attr("x", 0)
                .attr("y", 15)
                .text("0")
                .attr("fill", "white");
                
            legend.append("text")
                .attr("x", 280)
                .attr("y", 15)
                .text("80")
                .attr("fill", "white");
        }
        
        // åˆå§‹åŒ–æŠ˜çº¿å›¾
        function initLineChart() {
            const container = document.getElementById('line-chart');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };
            
            const svg = d3.select(container)
                .append("svg")
                .attr("width", width)
                .attr("height", height);
            
            const chartGroup = svg.append("g")
                .attr("transform", `translate(${margin.left}, ${margin.top})`);
            
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;
            
            // åˆ›å»ºæ¯”ä¾‹å°º
            const xScale = d3.scaleLinear()
                .domain([2018, 2025])
                .range([0, chartWidth]);
                
            const yScale = d3.scaleLinear()
                .domain([0, 10])
                .range([chartHeight, 0]);
            
            // åˆ›å»ºæŠ˜çº¿ç”Ÿæˆå™¨
            const line = d3.line()
                .x(d => xScale(d.year))
                .y(d => yScale(d.east));
            
            // ç»˜åˆ¶æŠ˜çº¿
            chartGroup.append("path")
                .datum(economicData.historical)
                .attr("fill", "none")
                .attr("stroke", "#1f77b4")
                .attr("stroke-width", 2)
                .attr("d", line);
            
            // æ·»åŠ åæ ‡è½´
            const xAxis = d3.axisBottom(xScale).tickFormat(d3.format("d"));
            const yAxis = d3.axisLeft(yScale);
            
            chartGroup.append("g")
                .attr("transform", `translate(0, ${chartHeight})`)
                .call(xAxis);
                
            chartGroup.append("g")
                .call(yAxis);
            
            // æ·»åŠ æ ‡é¢˜
            chartGroup.append("text")
                .attr("x", chartWidth / 2)
                .attr("y", -5)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .text("ä¸œéƒ¨åœ°åŒºç»æµå¢é•¿ç‡ (%)");
        }
        
        // åˆå§‹åŒ–æ‰€æœ‰å¯è§†åŒ–
        function initVisualizations() {
            initThreeJS();
            initPieChart();
            initMapVisualization();
            initLineChart();
            // å…¶ä»–å¯è§†åŒ–åˆå§‹åŒ–å‡½æ•°åº”åœ¨è¿™é‡Œè°ƒç”¨
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            initVisualizations();
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶
            document.getElementById('resetBtn').addEventListener('click', () => {
                initVisualizations();
            });
            
            document.getElementById('themeBtn').addEventListener('click', () => {
                document.body.classList.toggle('light-theme');
            });
            
            document.getElementById('animateBtn').addEventListener('click', () => {
                // è¿™é‡Œå¯ä»¥æ·»åŠ åŠ¨ç”»æ•ˆæœ
            });
        });
        
        // å“åº”çª—å£å¤§å°å˜åŒ–
        window.addEventListener('resize', () => {
            initVisualizations();
        });
    </script>
</body>
</html>
